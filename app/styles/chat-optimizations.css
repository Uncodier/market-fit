/* Advanced CSS optimizations for chat performance */

/* GPU acceleration and smooth animations */
.optimized-textarea {
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  width: 100%;
}

/* Optimize textarea for smooth typing */
.optimized-textarea {
  /* Force GPU acceleration */
  transform: translateZ(0);
  will-change: scroll-position, contents;
  backface-visibility: hidden;
  
  /* Optimize for text rendering */
  font-kerning: auto;
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* Improve scrolling performance */
  overflow-anchor: none;
  overscroll-behavior: contain;
  
  /* Optimize repaints */
  contain: layout style paint;
}

/* Message list optimizations */
.chat-messages-container {
  /* Enable hardware acceleration for scrolling */
  transform: translateZ(0);
  will-change: scroll-position;
  
  /* Optimize scrolling */
  overflow-anchor: auto;
  overscroll-behavior: contain;
  
  /* Improve rendering performance */
  contain: layout style;
}

/* Individual message optimizations */
.chat-message {
  /* Optimize individual message rendering */
  contain: layout style paint;
  will-change: transform, opacity;
  
  /* Improve text rendering */
  font-kerning: auto;
  text-rendering: optimizeSpeed;
}

/* Animation performance optimizations */
.chat-transition {
  /* Use GPU for animations */
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  
  /* Optimize animation curves */
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Channel selector optimizations */
.channel-selector {
  /* Optimize for quick interactions */
  contain: layout style;
  will-change: transform;
  transform: translateZ(0);
}

/* Loading states optimization */
.typing-indicator {
  /* Optimize animation performance */
  contain: layout style paint;
  will-change: transform;
  animation-fill-mode: both;
  animation-play-state: running;
}

/* Layout optimization for collapsed states */
.chat-list-collapsed {
  /* Optimize layout shifts */
  contain: size layout style;
  will-change: width, opacity;
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .optimized-textarea,
  .chat-message {
    /* Better text rendering on high DPI */
    -webkit-font-smoothing: subpixel-antialiased;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .chat-transition,
  .typing-indicator {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Text wrapping and overflow optimizations */
.chat-message-content {
  /* Aggressive text wrapping for long content */
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: break-word;
  hyphens: auto;
  
  /* Ensure content never overflows */
  max-width: 100%;
  width: 100%;
  overflow: hidden;
  
  /* Handle inline code and pre elements */
  white-space: pre-wrap;
  
  /* Improve readability */
  line-height: 1.6;
  font-variant-ligatures: common-ligatures;
}

/* Specific handling for code blocks and preformatted text */
.chat-message-content pre,
.chat-message-content code {
  /* Force wrapping in code blocks */
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  word-break: break-word !important;
  
  /* Ensure code doesn't overflow */
  max-width: 100% !important;
  overflow-x: auto;
  overflow-y: hidden;
  
  /* Add horizontal scroll only when necessary */
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

/* Handle very long URLs and file paths */
.chat-message-content a,
.chat-message-content [href] {
  word-break: break-all;
  overflow-wrap: break-word;
  hyphens: none;
}

/* Ensure tables and wide content are contained */
.chat-message-content table {
  max-width: 100%;
  table-layout: fixed;
  word-wrap: break-word;
}

.chat-message-content td,
.chat-message-content th {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 0;
}

/* Dark mode optimizations */
@media (prefers-color-scheme: dark) {
  .optimized-textarea {
    /* Optimize for dark backgrounds */
    color-scheme: dark;
  }
  
  .chat-message-content pre,
  .chat-message-content code {
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }
} 